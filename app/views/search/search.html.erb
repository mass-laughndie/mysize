<% provide(:title, "検索") %>

<div class="content-sspace search-space">
  <div class="fixed fixed-top search-height">
    <%= render 'shared/search_form' %>
  </div>
</div>
<% unless params[:keyword].nil? %>
  <div class="content-nspace">
    <div class="c select-form search-select">
      <div class="select-list search-list alist aline">
        <%= link_to "ユーザー", search_path(keyword: params[:keyword], for: 'user') %>
      </div>
      <div class="select-list search-list alist aline">
        <%= link_to "投稿", search_path(keyword: params[:keyword], for: 'post') %>
      </div>
      <div class="select-list search-list alist aline">
        <%= link_to "コメント", search_path(keyword: params[:keyword], for: 'com') %>
      </div>
    </div>
    <div class="search-result">
      <% if params[:for] == 'post' %>
        <% if @kicksposts.blank? %>
          <%= render partial: 'shared/no_data',
                     locals: { user: current_user,
                               target: nil } %>
        <% else %>
          <div class="post-main">
            <div class="post-line clear">
              <ul>
                <% @kicksposts.each do |kickspost| %>                
                  <%= render partial: 'kicksposts/kickspost_text',
                             locals: { kickspost: kickspost } %>
                <% end %>
              </ul>
            </div>
          </div>
        <% end %>
      <% elsif params[:for] == 'com' %>
        <% if @comments.blank? %>
          <%= render partial: 'shared/no_data',
                     locals: { user: current_user,
                               target: nil } %>
        <% else %>
          <div class="post-main">
            <div class="post-line clear">
              <ul>
                <% @comments.each do |comment| %>
                  <%= render partial: 'comments/comment_text',
                             locals: { comment: comment } %>
                <% end %>
              </ul>
            </div>
          </div>
        <% end %>
      <% elsif params[:for] == 'user' || params[:for].blank? %>
        <% if @users.blank? %>
          <%= render partial: 'shared/no_data',
                     locals: { user: current_user,
                               target: nil } %>
        <% else %>
          <div class="setting-select">
            <ul>
              <%= render @users %>
            </ul>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>